\chapter{Dobór parametrów cyfrowego algorytmu PID oraz algorytmu DMC}

Podczas strojenia regulatorów przyjêliœmy nastêpuj¹c¹ trajektoriê zadan¹
\begin{equation}
y^{\mathrm{zad}}(k)=
\begin{cases}
0 \quad \quad \textrm{ dla } \quad 1 \le k \le 99\\
\num{0.5} \quad \textrm{ dla } \quad 100 \le k \le 299\\
1 \quad \quad \textrm{ dla } \quad 300 \le k \le 499\\
\num{-0.1} \quad \textrm{ dla } \quad 500 \le k \le 699\\
5 \quad \quad \textrm{ dla } \quad 700 \le k \le 1200
\end{cases}
\end{equation}

Jakoœæ regulacji ocenialiœmy na podstawie wykresów oraz na podstawie poni¿szego wskaŸnika jakoœci
\begin{equation}
	E = \sum^{k_\mathrm{konc}}_{k=1}(y^\mathrm{zad}(k)-y(k))^2
\end{equation}



\section{Regulator PID}
Regulator PID stroiliœmy metod¹ in¿yniersk¹ ze wzglêdu na zawodnoœæ metody Zieglera-Nicholsa. W pierwszej kolejnoœci dobraliœmy wartoœæ wzmocnienia. W kolejnych krokach dostrajaliœmy kolejno cz³ony ca³kuj¹cy i ró¿niczkuj¹cy. Kolejne etapy strojenia regulatora zosta³y zilustrowane na rys.~\ref{syg_we_pid1}~$-$~\ref{syg_wy_pid8}.

Ostatecznie przyjêliœmy nastêpuj¹ce nastawy regulatora PID
\begin {equation}
	K = \num{0.11},\quad T_\mathrm{i} = \num{4.6},\quad T_\mathrm{d} = \num{0.65}
\end{equation}
Przebiegi uzyskane dla tych wartoœci przedstawiono na rysunkach \ref{syg_we_pid8} oraz \ref{syg_wy_pid8}. Uzyskana wartoœæ wskaŸnika jakoœci $E=\num{403.7229}$.



\begin{figure}[tb]
	\centering
	\includegraphics[scale=0.85, trim={2cm 8.5cm 2cm 8.5cm}]{rysunki/strojenie_pid/K_1_Ti_10000_Td_0_we_pid}
	\caption{Kalibracja regulatora PID (krok 1) - sygna³ steruj¹cy}
	\label{syg_we_pid1}
\end{figure}
\begin{figure}[tb]
	\centering
	\includegraphics[scale=0.85, trim={2cm 8.5cm 2cm 8.5cm}]{rysunki/strojenie_pid/K_1_Ti_10000_Td_0_wy_pid}
	\caption{Kalibracja regulatora PID (krok 1) - sygna³ wyjœciowy i zadany. $E = \num{9.1217e+03}$. Dobieranie nastawów regulatora PID zaczêliœmy ze wzmocnieniem równym 1 i wy³¹czonym cz³onem ca³kuj¹cym oraz ró¿niczkuj¹cym. W nastêpnym kroku zmniejszymy wzmocnienie tak, a¿eby zmniejszyæ oscylacje.}
	\label{syg_wy_pid1}
\end{figure}

\begin{figure}[tb]
	\centering
	\includegraphics[scale=0.85, trim={2cm 8.5cm 2cm 8.5cm}]{rysunki/strojenie_pid/K_0.5_Ti_10000_Td_0_we_pid}
	\caption{Kalibracja regulatora PID (krok 2) - sygna³ steruj¹cy}
	\label{syg_we_pid2}
\end{figure}
\begin{figure}[tb]
	\centering
	\includegraphics[scale=0.85, trim={2cm 8.5cm 2cm 8.5cm}]{rysunki/strojenie_pid/K_0.5_Ti_10000_Td_0_wy_pid}
	\caption{Kalibracja regulatora PID (krok 2) - sygna³ wyjœciowy i zadany. $E = \num{7.8324e+03}$. B³¹d zmala³, obserwujemy uchyb ustalony oraz oscylacje. Aby wyeliminowaæ uchyb zwiêkszamy wp³yw cz³onu ca³kuj¹cego.}
	\label{syg_wy_pid2}
\end{figure}

\begin{figure}[tb]
	\centering
	\includegraphics[scale=0.85, trim={2cm 8.5cm 2cm 8.5cm}]{rysunki/strojenie_pid/K_0.5_Ti_50_Td_0_we_pid}
	\caption{Kalibracja regulatora PID (krok 3) - sygna³ steruj¹cy}
	\label{syg_we_pid3}
\end{figure}
\begin{figure}[tb]
	\centering
	\includegraphics[scale=0.85, trim={2cm 8.5cm 2cm 8.5cm}]{rysunki/strojenie_pid/K_0.5_Ti_50_Td_0_wy_pid}
	\caption{Kalibracja regulatora PID (krok 3) - sygna³ wyjœciowy i zadany. $E = \num{7.3528e+03}$.}
	\label{syg_wy_pid3}
\end{figure}

\begin{figure}[tb]
	\centering
	\includegraphics[scale=0.85, trim={2cm 8.5cm 2cm 8.5cm}]{rysunki/strojenie_pid/K_0.5_Ti_20_Td_0_we_pid}
	\caption{Kalibracja regulatora PID (krok 4) - sygna³ steruj¹cy}
	\label{syg_we_pid4}
\end{figure}
\begin{figure}[tb]
	\centering
	\includegraphics[scale=0.85, trim={2cm 8.5cm 2cm 8.5cm}]{rysunki/strojenie_pid/K_0.5_Ti_20_Td_0_wy_pid}
	\caption{Kalibracja regulatora PID (krok 4) - sygna³ wyjœciowy i zadany. $E = \num{6.7934e+03}$. Mo¿emy dalej zauwa¿yæ uchyb oraz oscylacje. W celu ich usuniêcia zmniejszamy wzmocnienie oraz zwiêkszamy ca³kowanie.}
	\label{syg_wy_pid4}
\end{figure}

\begin{figure}[tb]
	\centering
	\includegraphics[scale=0.85, trim={2cm 8.5cm 2cm 8.5cm}]{rysunki/strojenie_pid/K_0.2_Ti_10_Td_0_we_pid}
	\caption{Kalibracja regulatora PID (krok 5) - sygna³ steruj¹cy}
	\label{syg_we_pid5}
\end{figure}
\begin{figure}[tb]
	\centering
	\includegraphics[scale=0.85, trim={2cm 8.5cm 2cm 8.5cm}]{rysunki/strojenie_pid/K_0.2_Ti_10_Td_0_wy_pid}
	\caption{Kalibracja regulatora PID (krok 5)- sygna³ wyjœciowy i zadany. $E = \num{414.1249}$.}
	\label{syg_wy_pid5}
\end{figure}

\begin{figure}[tb]
	\centering
	\includegraphics[scale=0.85, trim={2cm 8.5cm 2cm 8.5cm}]{rysunki/strojenie_pid/K_0.1_Ti_5_Td_0_we_pid}
	\caption{Kalibracja regulatora PID (krok 6) - sygna³ steruj¹cy}
	\label{syg_we_pid6}
\end{figure}
\begin{figure}[tb]
	\centering
	\includegraphics[scale=0.85, trim={2cm 8.5cm 2cm 8.5cm}]{rysunki/strojenie_pid/K_0.1_Ti_5_Td_0_wy_pid}
	\caption{Kalibracja regulatora PID (krok 6) - sygna³ wyjœciowy i zadany. $E = \num{360.4340}$. Widzimy znaczn¹ poprawê zarówno jakoœciow¹ jak i wskaŸnika iloœciowego. W³¹czamy cz³on ró¿niczkuj¹cy w celu skrócenia czasu osi¹gania wartoœci zadanej.}
	\label{syg_wy_pid6}
\end{figure}

\begin{figure}[tb]
	\centering
	\includegraphics[scale=0.85, trim={2cm 8.5cm 2cm 8.5cm}]{rysunki/strojenie_pid/K_0.12_Ti_4.5_Td_0.2_we_pid}
	\caption{Kalibracja regulatora PID (krok 7) - sygna³ steruj¹cy}
	\label{syg_we_pid7}
\end{figure}
\begin{figure}[tb]
	\centering
	\includegraphics[scale=0.85, trim={2cm 8.5cm 2cm 8.5cm}]{rysunki/strojenie_pid/K_0.12_Ti_4.5_Td_0.2_wy_pid}
	\caption{Kalibracja regulatora PID (krok 7) - sygna³ wyjœciowy i zadany. $E = \num{306.9011}$. Mo¿emy zauwa¿yæ poprawê wskaŸnika iloœciowego jednak¿e niepoj¹ce s¹ oscylacje. W celu zniwelowania ich zmniejszymy wzmocnienie, zwiêkszymy ró¿niczkê.}
	\label{syg_wy_pid7}
\end{figure}

\begin{figure}[tb]
	\centering
	\includegraphics[scale=0.85, trim={2cm 8.5cm 2cm 8.5cm}]{rysunki/strojenie_pid/K_0.11_Ti_4.6_Td_0.65_we_pid}
	\caption{Ostateczny regulator PID - sygna³ steruj¹cy}
	\label{syg_we_pid8}
\end{figure}
\begin{figure}[tb]
	\centering
	\includegraphics[scale=0.85, trim={2cm 8.5cm 2cm 8.5cm}]{rysunki/strojenie_pid/K_0.11_Ti_4.6_Td_0.65_wy_pid}
	\caption{Ostateczny regulator PID - sygna³ wyjœciowy i zadany. $E = \num{403.7229}$. WskaŸnik iloœciowy uleg³ pogorszeniu jednak¿e widzimy poprawê jakoœciow¹ - wyeliminowanie oscylacji.}
	\label{syg_wy_pid8}
\end{figure}




\section{Regulator DMC}
Wa¿nym elementem strojenia pojedynczego regulatora DMC by³ dobór odpowiedzi skokowej. Najlepiej wypada³a odpowiedŸ skokowa w punkcie pracy dla $u = \num{0.6}$, ze skokiem do $u = \num{1.0}$, dla zadanej trajektorii sygna³u wyjœciowego. 
Regulator DMC stroiliœmy pocz¹wszy od najwiêkszych mo¿liwych wartoœci horyzontów predykcji oraz sterowania, wynikaj¹cyh z d³ugoœci zebranej odpowiedzi skokowej $D=53$. Nastêpnie stopniowo zmniejszaliœmy horyzonty $N$ oraz $N_\mathrm{u}$ tak, by z jednej strony zmniejszyæ z³o¿onoœæ obliczeniow¹ algorytmu, a z drugiej utrzymaæ dobr¹ jakoœæ regulacji. Na koñcu manipulowaliœmy wpó³czynnikiem kar za przyrosty sterowania i zauwa¿yliœmy, ¿e jego zwiêkszanie wp³ywa niekorzystnie na regulacjê, wiêc pozostawiliœmy wspó³czynnik niezmieniony. Kolejne etapy strojenia regulatora zosta³y zilustrowane na rys.~\ref{syg_we_dmc1}~$-$~\ref{syg_wy_dmc7}.

Ostatecznie przyjêliœmy nastêpuj¹ce nastawy regulatora DMC
\begin{equation}
	D = 53,\quad N = 10,\quad N_\mathrm{u} = 2,\quad \lambda=1
\end{equation}
Przebiegi uzyskane dla takiego strojenia regulatora DMC przedstawiono na rysunkach \ref{dmc_we} oraz \ref{dmc_wy}. Uzyskana wartoœæ wskaŸnika jakoœci wynosi $E=\num{264.7306}$.

\begin{figure}[tb]
	\centering
	\includegraphics[scale=0.85, trim={2cm 8.5cm 2cm 8.5cm}]{rysunki/strojenie_dmc/N_53_Nu_53_L_1_we_dmc}
	\caption{Kalibracja regulatora DMC (krok 1) - sygna³ steruj¹cy.}
	\label{syg_we_dmc1}
\end{figure}
\begin{figure}[tb]
	\centering
	\includegraphics[scale=0.85, trim={2cm 8.5cm 2cm 8.5cm}]{rysunki/strojenie_dmc/N_53_Nu_53_L_1_wy_dmc}
	\caption{Kalibracja regulatora DMC (krok 1) - sygna³ wyjœciowy i zadany. $E = \num{294.2837}$. Dobieranie nastawów regulatora DMC zaczêliœmy od maksymalnego horyzontu predykcji i horyzontu sterowania przy wspó³czynniku $\lambda = 1$. W celu zmniejszenia iloœci obliczeñ, zmniejszamy horyzont predykcji i horyzont sterowania.}
	\label{syg_wy_dmc1}
\end{figure}

\begin{figure}[tb]
	\centering
	\includegraphics[scale=0.85, trim={2cm 8.5cm 2cm 8.5cm}]{rysunki/strojenie_dmc/N_20_Nu_20_L_1_we_dmc}
	\caption{Kalibracja regulatora DMC (krok 2) - sygna³ steruj¹cy.}
	\label{syg_we_dmc2}
\end{figure}
\begin{figure}[tb]
	\centering
	\includegraphics[scale=0.85, trim={2cm 8.5cm 2cm 8.5cm}]{rysunki/strojenie_dmc/N_20_Nu_20_L_1_wy_dmc}
	\caption{Kalibracja regulatora DMC (krok 2) - sygna³ wyjœciowy i zadany. $E = \num{294.2833}$.}
	\label{syg_wy_dmc2}
\end{figure}

\begin{figure}[tb]
	\centering
	\includegraphics[scale=0.85, trim={2cm 8.5cm 2cm 8.5cm}]{rysunki/strojenie_dmc/N_10_Nu_10_L_1_we_dmc}
	\caption{Kalibracja regulatora DMC (krok 3) - sygna³ steruj¹cy.}
	\label{syg_we_dmc3}
\end{figure}
\begin{figure}[tb]
	\centering
	\includegraphics[scale=0.85, trim={2cm 8.5cm 2cm 8.5cm}]{rysunki/strojenie_dmc/N_10_Nu_10_L_1_wy_dmc}
	\caption{Kalibracja regulatora DMC (krok 3) - sygna³ wyjœciowy i zadany. $E = \num{293.6470}$.}
	\label{syg_wy_dmc3}
\end{figure}

\begin{figure}[tb]
	\centering
	\includegraphics[scale=0.85, trim={2cm 8.5cm 2cm 8.5cm}]{rysunki/strojenie_dmc/N_5_Nu_5_L_1_we_dmc}
	\caption{Kalibracja regulatora DMC (krok 4) - sygna³ steruj¹cy.}
	\label{syg_we_dmc4}
\end{figure}
\begin{figure}[tb]
	\centering
	\includegraphics[scale=0.85, trim={2cm 8.5cm 2cm 8.5cm}]{rysunki/strojenie_dmc/N_5_Nu_5_L_1_wy_dmc}
	\caption{Kalibracja regulatora DMC (krok 4) - sygna³ wyjœciowy i zadany. $E = \num{489.0684}$. Widzimy znaczne pogorszenie wskaŸnika iloœciowego jak i jakoœciowego. Zostawiamy horyzont predykcji $N = 10$ i zaczynamy zmniejszaæ horyzont sterowania.}
	\label{syg_wy_dmc4}
\end{figure}

\begin{figure}[tb]
	\centering
	\includegraphics[scale=0.85, trim={2cm 8.5cm 2cm 8.5cm}]{rysunki/strojenie_dmc/N_10_Nu_5_L_1_we_dmc}
	\caption{Kalibracja regulatora DMC (krok 5) - sygna³ steruj¹cy.}
	\label{syg_we_dmc5}
\end{figure}
\begin{figure}[tb]
	\centering
	\includegraphics[scale=0.85, trim={2cm 8.5cm 2cm 8.5cm}]{rysunki/strojenie_dmc/N_10_Nu_5_L_1_wy_dmc}
	\caption{Kalibracja regulatora DMC (krok 5) - sygna³ wyjœciowy i zadany. $E = \num{293.6485}$.}
	\label{syg_wy_dmc5}
\end{figure}

\begin{figure}[tb]
	\centering
	\includegraphics[scale=0.85, trim={2cm 8.5cm 2cm 8.5cm}]{rysunki/strojenie_dmc/N_10_Nu_2_L_1_we_dmc}
	\caption{Kalibracja regulatora DMC (krok 6) - sygna³ steruj¹cy.}
	\label{syg_we_dmc6}
\end{figure}
\begin{figure}[tb]
	\centering
	\includegraphics[scale=0.85, trim={2cm 8.5cm 2cm 8.5cm}]{rysunki/strojenie_dmc/N_10_Nu_2_L_1_wy_dmc}
	\caption{Kalibracja regulatora DMC (krok 6) - sygna³ wyjœciowy i zadany. $E = \num{295.0224}$. Jakoœæ regulacji jest satysfakcjonuj¹ca. Spróbujemy zwiêkszyæ wspó³czynnik kary $\lambda$.}
	\label{syg_wy_dmc6}
\end{figure}

\begin{figure}[tb]
	\centering
	\includegraphics[scale=0.85, trim={2cm 8.5cm 2cm 8.5cm}]{rysunki/strojenie_dmc/N_10_Nu_2_L_2_we_dmc}
	\caption{Kalibracja regulatora DMC (krok 7) - sygna³ steruj¹cy.}
	\label{syg_we_dmc7}
\end{figure}
\begin{figure}[tb]
	\centering
	\includegraphics[scale=0.85, trim={2cm 8.5cm 2cm 8.5cm}]{rysunki/strojenie_dmc/N_10_Nu_2_L_2_wy_dmc}
	\caption{Kalibracja regulatora DMC (krok 7) - sygna³ wyjœciowy i zadany. $E = \num{300.1283}$. Mo¿emy zauwa¿yæ pogorszenie wskailoœciowego. Dalsze zwiêkszanie wspó³czynnika kary $\lambda$ powoduje dalsze zwiêkszanie siê b³êdu.}
	\label{syg_wy_dmc7}
\end{figure}

\begin{figure}[h!]
	\centering
	\includegraphics[scale=0.85, trim={2cm 8.5cm 2cm 8.5cm}]{rysunki/strojenie_dmc/N_10_Nu_2_L_1_we_dmc}
	\caption{Ostateczny regulator DMC - sygna³ steruj¹cy}
	\label{dmc_we}
\end{figure}

\begin{figure}[h!]
	\centering
	\includegraphics[scale=0.85, trim={2cm 8.5cm 2cm 8.5cm}]{rysunki/strojenie_dmc/N_10_Nu_2_L_1_wy_dmc}
	\caption{Ostateczny regulator DMC - sygna³ wyjœciowy i zadany}
	\label{dmc_wy}
\end{figure}



\section{Wnioski}
Porównuj¹c najlepszy uzyskany regulator PID z najlepszym uzyskanym regulatorem DMC mo¿na stwierdziæ, ¿e regulator PID pozwoli³ zapewniæ spokojniejsze dzia³anie uk³adu bez wystêpowanie oscylacji oraz przeregulowania. Oscylacji jak i przeregulowania nie uda³o siê unikn¹æ w algorytmie DMC. Regulator DMC dzia³a³ jednak szybciej od PID. Pod wzglêdem wskaŸnika jakoœci $E$ regulator DMC równie¿ wypad³ korzystniej od PID. Zatem ciê¿ko jest jednoznacznie wskazaæ, który regulator jest lepszy. Z racji tego, ¿e badany obiekt jest nieliniowy, mo¿na poprawiæ jakoœæ regulacji dla obu algorytmów przez zastosowanie regulatorów rozmytych. 

\section{Implementacja}
Do strojenia regulatorów PID oraz DMC wykorzystaliœmy program zawarty w skrypcie \verb+zad3.m+.
