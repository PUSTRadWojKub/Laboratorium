\chapter{Dobór nastaw regulatorów}

\section{Dobór nastaw cyfrowego regulatora PID}
Nastawy regulatora PID dobrane zosta³y metod¹ in¿yniersk¹. Po przeprowadzeniu strojenia metod¹ in¿yniersk¹ nastawy regulatora zosta³y dodatkowo poprawione tak, aby zminimalizowaæ wskaŸnik jakoœci. WskaŸnik jakoœci regulacji, wyznaczany za pomoc¹ metody najmniejszych kwadratów, dany jest wzorem:

\begin{equation}
E=\sum^{k_{\mathrm{konc}}}_{k=1}(y^{\mathrm{zad}}(k)-y(k))^2
\end{equation}

Na pocz¹tku, przy w³¹czonym cz³onie proporcjonalnym P oraz wy³¹czonymi cz³onami ca³kuj¹cym i ró¿niczkuj¹cym uk³ad doprowadzony zosta³ na granicê stabilnoœci poprzez takie dobranie wzmocnienia $K$, ¿e uk³ad wpad³ w niegasn¹ce oscylacje.

\begin{figure}[h!]
\centering
\input{rysunki/zad4P_oscylacje.tex}
\caption{Regulator PID, $K = \num{2.0}$}
\end{figure}

Na podstawie oscylacji okreœlone zosta³o wzmocnienie krytyczne $K_{\mathrm{kryt}} = \num{2.0}$ oraz okres oscylacji $T_{\mathrm{osc}} = 20$. Na podstawie tych parametrów wyznaczone zosta³y nastawy regulatora PID zgodnie ze wzorami:

\begin{equation}
K_\mathrm{p} = \num{0.5}K_{\mathrm{kryt}}
\end{equation}
\begin{equation}
T_\mathrm{i} = \num{0.6}T_{\mathrm{osc}}
\end{equation}
\begin{equation}
T_\mathrm{d} = \frac {T_{\mathrm{osc}}}{8}
\end{equation}

Otrzymano nastêpuj¹ce nastawy: $K = 1,2$, $T_\mathrm{i} = 10$, $T_\mathrm{d} = \num{2.5}$. Wartoœæ wskaŸnika jakoœci wynosi³a $E = \num{16,14}$.

\begin{figure}[h!]
\centering
\input{rysunki/zad4_PID_ZN.tex}
\caption{Regulator PID, $K = 1,2$, $T_\mathrm{i} = 10$, $T_\mathrm{d} = \num{2.5}$}
\end{figure}

Na podstawie przebiegów widaæ jednak, ¿e jakoœæ regulacji nie jest zadowalaj¹ca - sygna³ wyjœciowy stale oscyluje wokó³ wartoœci zadanej. Z tego podowu eksperymentlanie dobrane zosta³y nowe nastawy, poprzez zmienianie kolejnych wpó³czynników regulatora. Celem by³a minimalizacja wskaŸnika jakoœci, danego jako suma b³êdów kwadratowych. Oprócz wskaŸnika jakoœci pod uwagê wziête zosta³y równie¿ przebiegi. Na ich podstawie dobrane zosta³y nowe nastawy: $K = \num{0.6}$, $T_\mathrm{i} = 11$, $T_\mathrm{d} = \num{3.5}$. 

\begin{figure}[h!]
\centering
\input{rysunki/zad4_PID2.tex}
\caption{Regulator PID,  $K = \num{0.6}$, $T_\mathrm{i} = 11$, $T_\mathrm{d} = \num{3.5}$}
\end{figure}

Jakoœæ regulacji jest zdecydowanie lepsza, nie wystêpuj¹ oscylacje czy przeregulowania. Wartoœæ wskaŸnika jakoœci wynosi³a $E$ = 12,8.

\section{Dobór nastaw predykcyjnego regulatora DMC}
Na pocz¹tkowe nastawy regulatora DMC przyjêto obliczony w punkcie 3 horyzont dynamiki  $N = N_\mathrm{u} = D = 170$, zaœ wspó³czynnik kary $\lambda = 1$. Nastêpnie zmniejszane by³y horyzonty $N$ i $N_\mathrm{u}$ oraz zwiêkszany wspó³czynnik $\lambda$. WskaŸnik jakoœci regulacji, podobnie jak w przypadku regulatora PID, dany jest jako suma b³êdów kwadratowych.

\begin{figure}[h!]
\centering
\input{rysunki/zad4_DMC_1.tex}
\caption{Regulator DMC,  $N = N_\mathrm{u} = D = 170$, $\lambda = 1$}
\end{figure}

Wartoœæ wskaŸnika jakoœci wynosi³a $E = \num{8.612}$. Na podstawie przebiegów mo¿na ju¿ stwierdziæ, ¿e jakoœæ regulacji jest o wiele lepsza ni¿ w przypadku nastrojonego regulatora PID. W celu zmniejszenia wartoœci wskaŸnika jakoœci zmniejszane by³y horyzonty $N$ i $N_\mathrm{u}$ oraz zwiêkszona kara $\lambda$. Ostatecznie dobrane nastawy: $N = 18$, $N_\mathrm{u} = 2$, $D = 170$, $\lambda = 1$.
\newpage

\begin{figure}[h!]
\centering
\input{rysunki/zad4DMC.tex}
\caption{Regulator DMC,  $N = 18$, $N_\mathrm{u} = 2$, $D = 170$, $\lambda = 1$}
\end{figure}

Wartoœæ wskaŸnika jakoœci wynosi³a $E = \mathrm{8.609}$. Jak widaæ, jakoœæ regulacji zmieni³a siê bardzo niewiele.

\section{Implementacja}
Implementacja fukcji wykorzystanych do wykonania zadania zawarte s¹ w skrypcie \verb+podpunkt_5_v1.m+.